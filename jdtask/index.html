<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>京东签到</title>
    <style type="text/css">
    	body {
    		font-size: 30px;
    	}
    	li {
    		padding: 5px;
    	}
      a {
        color:blue;
      }
      a.visited {
        color:#551a8b;
      }
    </style>
  </head>
  <body>
  	<ol id="items">

</ol>

<script>
  document.getElementById("items").addEventListener("click",function(e){
    if(e.target.tagName==="A") {
      var a=e.target;
      a.className = "visited";
      console.info(a.id);
      taskInfo.ids.push(a.id);
      localStorage.setItem("jdtask",JSON.stringify(taskInfo));
    }
    console.info(e);
  },false);


  function showTaskInfo() {
    taskInfo.ids.forEach(function(id){
      var li = document.getElementById(id);
      if(li) li.className = "visited";
    });
    //localStorage.setItem("jdtask",JSON.stringify(taskInfo));
  }

  function getToday() {
      var now = new Date();
      var today = now.getFullYear()*10000+ (now.getMonth()+1)*100+now.getDate();
      return today;
  }

  function initTaskInfo(today) {
    return {
      date:today,
      ids:[]
    };
  }

  (function() {
    var urls = [
    ["http://url.cn/5yNPlX0","四月福利"],
["https://bean.m.jd.com/?sid=","领金豆"],
["https://m.jr.jd.com/spe/qyy/hzq/index.html?usertype=1176&lanmu&sid=#/","领钢镚"],
["https://coin.jd.com/m/gb/index.html","领钢镚1"],
["https://vip.m.jd.com/?sid=","京东会员"],
["https://m.jr.jd.com/activity/shactivity/payrebate/html/indexhd.html?sid=&cu=true&utm_source=kong&utm_medium=tuiguang&utm_campaign=t_1000550368_&utm_term=9518a0b6fd484b69a9e2df6e6347f05b&abt=3&tab=2","购物领京豆"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=484&activityid=215","早起打卡"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=447&activityid=348&sid=","APP钢镚"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=190&activityid=412","APP钢镚1"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=604&jumpType=8&activityid=539","股票翻牌"],
["https://gamecenter.m.jd.com/?sid=","领豆"],
["https://m.jr.jd.com/spe/qyy/main/index.html?userType=77&utm_source=kong&utm_medium=zssc&utm_campaign=t_1000027277_102969&utm_term=0c6d072c-88f3-448c-9d92-62c0e53951d2-p_1999-pr_1107-at_102969&jd_pop=0c6d072c-88f3-448c-9d92-62c0e53951d2&abt=0","合集"],
["https://home.jdpay.com/my/welfare/jxWelfarePage?type=jingdou&source=JDSC","合集1"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=736&activityid=677","京东金融打开"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=447&activityid=348&sid=","京东金融打开1"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=190&activityid=473","签到"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=190&activityid=457","领钢镚"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=190&activityid=180","数钱"],
["https://m.jr.jd.com/spe/downloadApp/index.html?id=190&activityid=497","领优惠"],
["jdmobile://m.jr.jd.com/spe/downloadApp/index.html?id=190&activityid=497","测试1"]
];
// 456  小金库交易单
  var html = [];
  for(var i=0;i<urls.length;i++) {
    html.push('<li><a id="i',i,'" target="_blank" href="',urls[i][0],'">',urls[i][1],'</a></li>');
  }
  document.getElementById('items').innerHTML = html.join('');
  })();

  var taskInfo = null;
  (function(){
    var today = getToday();
    var jdtask = localStorage.getItem("jdtask");
    if(jdtask) {
      jdtask = JSON.parse(jdtask);
      if(jdtask.date == today) {
        taskInfo = jdtask;
      }
    }
    if(!taskInfo) taskInfo = initTaskInfo(today);
    showTaskInfo();
  })();

</script>

  </body>
</html>